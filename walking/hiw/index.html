<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1" />
		<title>Dog Walking, On Demand | DogVacay</title>
		<link rel="stylesheet" href="css/app.css" />
	</head>
	<body>

		<header>
			<img src="img/logo.png" />
		</header>

		<div id="content-wrapper-outer">
			<div id="content-wrapper">
				
				<div id="content">
					<!-- slide 1 -->
					<div class="dv-slide" id="slide-1">
						<h1>
							Get matched with the perfect walker.
						</h1>
						<div id="dv-walker-cards">
							<div class="card">
								<h2>
									Tanya Z.
								</h2>
							</div>
							<div class="card"></div>
							<div class="card"></div>
						</div>
						<p>
							Loving, certified walkers
						</p>
					</div>
					<!--\ slide 1 -->
					<!-- slide 2 -->
					<div class="dv-slide" id="slide-2">
						<h1>
							Use our free lock box to let your walker in.
						</h1>
						<img src="img/lock.jpg" alt="Free, secure lock box" />
						<p>
							Easy, secure access
						</p>
					</div>
					<!--\ slide 2 -->
					<!-- slide 3 -->
					<div class="dv-slide" id="slide-3">
						<h1>
							See the walk, right on your phone.
						</h1>
						<div class="dv-map">
							<img src="img/my-walk-map-sm.png" alt="See your dogs walk" />
							<div class="dv-dog">
								<img src="img/dog.jpg" />
							</div>
						</div>
						<p>
							Updates from the walker
						</p>
					</div>
					<!--\ slide 3 -->
				</div>

				<!-- slide state -->
				<ul id="dv-slide-state">
					<li data-pos="0" class="active"></li>
					<li data-pos="1"></li>
					<li data-pos="2"></li>
				</ul>
				<!--\ slide state -->

				<div id="cta">
					<a href="###" id="cta-button">Book my FREE walk</a>
					<small>
						Upon request, a DogVacay concierge will contact you to schedule the walk.
					</small>
				</div>

			</div>
		</div>

		<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
		<script src="https://hammerjs.github.io/dist/hammer.js"></script>
		<script src="js/app.js"></script> -->

		<script>
			var pos = 0,
				content = document.getElementById('content'),
				cta = document.getElementById('cta'),
				ctaButton = document.getElementById('cta-button'),
				cards = document.querySelectorAll('.card');

			if(window.innerWidth > 700) {
				var ctaHeight = cta.clientHeight,
					ctaHeightNegative = -Math.abs(ctaHeight / 2);

				content.setAttribute('style', 'margin-top:' + ctaHeightNegative + 'px');
			}

			function autoScroll(pos) {
				setInterval(function() {
					if(pos === 0) {
						content.setAttribute('class', 'pos-2');
					}else if(pos === 1){
						content.setAttribute('class', 'pos-3');
					}else {
						pos = -1;
						content.setAttribute('class', 'pos-3-out');
						removeOutClass(content, '');
					}
					pos++;
					setUIState(pos + 1);
				}, 5000);
			}

			function removeOutClass(el, classLeft) {
				setTimeout(function() {
					el.setAttribute('class', classLeft);
				}, 225);
			}

			function setUIState(pos) {
				var uiState = document.getElementById('dv-slide-state');

				setTimeout(function() {
					uiState.querySelector('li.active').classList = '';
					uiState.querySelector('li:nth-child(' + pos + ')').classList = 'active';
				}, 250);
			}

			function loadCards(el, time) {
				setTimeout(function() {
					el.classList = 'card loaded';
				}, time);
			}

			Array.prototype.forEach.call(cards, function(el, e){
				loadCards(el, 750 * e);
			});

			autoScroll(pos);

			ctaButton.onclick = function() {
				e.preventDefault();
				this.className = 'submitted';
			}
		</script>
		
	</body>
</html>